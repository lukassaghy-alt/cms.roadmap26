<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>CMS Product Roadmap 2026 v2.4</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        /* Scrollbar pre dropdown */
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        /* Animácia pre status icon */
        @keyframes spin-slow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .animate-spin-slow { animation: spin-slow 3s linear infinite; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect, useRef } = React;

        // --- ICONS ---
        const Icon = ({ children, size = 24, className = '' }) => (
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width={size}
                height={size}
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                strokeWidth="2"
                strokeLinecap="round"
                strokeLinejoin="round"
                className={className}
                aria-hidden="true"
            >
                {children}
            </svg>
        );

        const Icons = {
            Calendar: (props) => <Icon {...props}><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/></Icon>,
            List: (props) => <Icon {...props}><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/></Icon>,
            BarChart2: (props) => <Icon {...props}><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></Icon>,
            Zap: (props) => <Icon {...props}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></Icon>,
            AlertCircle: (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></Icon>,
            Layers: (props) => <Icon {...props}><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 12 12 17 22 12"/></Icon>,
            Clock: (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></Icon>,
            HelpCircle: (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></Icon>,
            ArrowRight: (props) => <Icon {...props}><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></Icon>,
            Link: (props) => <Icon {...props}><path d="M10 14a5 5 0 0 0 7.07 0l2.12-2.12a5 5 0 0 0-7.07-7.07L10 6.93"/><path d="M14 10a5 5 0 0 0-7.07 0L4.81 12.12a5 5 0 0 0 7.07 7.07L14 17.07"/></Icon>,
            Pencil: (props) => <Icon {...props}><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"/><path d="M20.71 7.04a1 1 0 0 0 0-1.41"/></Icon>,
            User: (props) => <Icon {...props}><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></Icon>,
            Briefcase: (props) => <Icon {...props}><rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></Icon>,
            CheckCircle: (props) => <Icon {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></Icon>,
            RefreshCw: (props) => <Icon {...props}><polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></Icon>,
            StopCircle: (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><path d="M4.93 4.93l14.14 14.14"/></Icon>,
            TrendingUp: (props) => <Icon {...props}><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></Icon>,
            Filter: (props) => <Icon {...props}><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></Icon>,
            X: (props) => <Icon {...props}><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></Icon>,
        };

        // --- DATA (Updated Category: TECH -> Tech upgrade) ---
        const rawData = [
            { id: '1', title: 'Stiahnutie obrázkov priamo z článkov', category: 'Feature', status: 'Doručené', owner: 'karol.schulz@newsandmedia.sk', size: 'XS', impact: 'Low', launch: 'Január', roiIndex: '0.47', impactMoney: 1, impactMarket: 3, client: 'NMH + VLM', manDays: 2, teams: 1, components: 1, effort: 'XS', sprints: 1, desiredDelivery: '31.1.2026', ddlProdSpec: '20.12.2025', notes: '', cmsUi: 'Vue' },
            { id: '2', title: 'SEO Content Checker 1.0', category: 'BAS', status: 'Doručené', owner: 'marek.murin@newsandmedia.sk', size: 'M', impact: 'Low', launch: 'Január', roiIndex: '0.30', impactMoney: 1, impactMarket: 2, client: 'NMH', manDays: 5, teams: 3, components: 2, effort: 'M', sprints: 1, desiredDelivery: '31.1.2026', ddlProdSpec: '6.12.2025', notes: '1. Clarity - pozrieť vhodnosť toolu pre identifikáciu business value', cmsUi: 'Vue' },
            { id: '3', title: 'Audio Transcript 1.0', category: 'AI', status: 'Doručené', owner: 'viktor.koslab@newsandmedia.sk', size: 'L', impact: 'High', launch: 'Január', roiIndex: '0.27', impactMoney: 3, impactMarket: 3, client: 'NMH', manDays: 42, teams: 3, components: 3, effort: 'L', sprints: 8, desiredDelivery: '31.1.2026', ddlProdSpec: '30.8.2025', notes: 'Tagy 2.0 MVP Demo', cmsUi: 'Vue' },
            { id: '4', title: 'Zamykanie Premium videa v určitom čase', category: 'Feature', status: 'Doručené', owner: 'lukas.saghy@newsandmedia.sk', size: 'L', impact: 'High', launch: 'Február', roiIndex: '0.80', impactMoney: 4, impactMarket: 4, client: 'NMH', manDays: 10, teams: 4, components: 4, effort: 'L', sprints: 2, desiredDelivery: '28.2.2026', ddlProdSpec: '20.12.2025', notes: 'Čakáme na GO od Web + Video tímu.', cmsUi: 'Vue' },
            { id: '5', title: 'HPM 2.1', category: 'Feature', status: 'Doručené', owner: 'radek.silbersky@newsandmedia.sk', size: 'XL', impact: 'Mid', launch: 'Január', roiIndex: '0.16', impactMoney: 3, impactMarket: 4, client: 'NMH + VLM', manDays: 70, teams: 3, components: 4, effort: 'XL', sprints: 16, desiredDelivery: '28.2.2026', ddlProdSpec: '24.5.2025', notes: 'Prezentácia pre redakcie, High-level sizing iniciatív = potvrdiť s TM/MP', cmsUi: 'Vue' },
            { id: '6', title: 'Tagy 2.0 MVP', category: 'AI', status: 'Prebieha', owner: 'lukas.saghy@newsandmedia.sk', size: 'XL', impact: 'High', launch: 'Február', roiIndex: '0.17', impactMoney: 4, impactMarket: 4, client: 'NMH', manDays: 88, teams: 4, components: 3, effort: 'XL', sprints: 20, desiredDelivery: '28.2.2026', ddlProdSpec: '29.3.2025', notes: '', cmsUi: 'Vue' },
            { id: '7', title: 'Prenos TASR News restyling do .NET CMS', category: 'AI', status: 'Doručené', owner: 'karol.schulz@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Február', roiIndex: '0.60', impactMoney: 2, impactMarket: 4, client: 'NMH', manDays: 5, teams: 2, components: 4, effort: 'M', sprints: 1, desiredDelivery: '28.2.2026', ddlProdSpec: '3.1.2026', notes: 'Potvrdiť ASAP scope s redakciou TREND.', cmsUi: 'Unknown' },
            { id: '8', title: 'Swap článkov na HP cez Drag&Drop (NČ)', category: 'Feature', status: 'Prebieha', owner: 'radek.silbersky@newsandmedia.sk', size: 'L', impact: 'Mid', launch: 'Marec', roiIndex: '0.29', impactMoney: 3, impactMarket: 4, client: 'NMH + VLM', manDays: 45, teams: 2, components: 5, effort: 'L', sprints: 8, desiredDelivery: '28.2.2026', ddlProdSpec: '27.9.2025', notes: 'Zostáva primárne swap článkov pre NČ.', cmsUi: 'Vue' },
            { id: '9', title: 'TECH UPGRADE PLAN 2026', category: 'Tech upgrade', status: 'Prebieha', owner: 'tomas.mikeska@newsandmedia.sk', size: 'L', impact: 'Mid', launch: 'Február', roiIndex: '0.56', impactMoney: 3, impactMarket: 2, client: 'NMH + VLM', manDays: 10, teams: 2, components: 6, effort: 'L', sprints: 2, desiredDelivery: '28.2.2026', ddlProdSpec: '20.12.2025', notes: 'Outcome = Zoznam / Rámec na 2026', cmsUi: 'Unknown' },
            { id: '10', title: 'VLM Tickets MVP Denik', category: 'BAS', status: 'Prebieha', owner: 'radek.silbersky@newsandmedia.sk', size: 'XL', impact: 'High', launch: 'Február', roiIndex: '0.29', impactMoney: 4, impactMarket: 4, client: 'VLM', manDays: 45, teams: 4, components: 9, effort: 'XL', sprints: 10, desiredDelivery: '28.2.2026', ddlProdSpec: '16.8.2025', notes: '', cmsUi: 'Vue' },
            { id: '11', title: 'Perex generator pre VLM (bez GITA)', category: 'AI', status: 'Prebieha', owner: 'radek.silbersky@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Február', roiIndex: '0.60', impactMoney: 3, impactMarket: 3, client: 'VLM', manDays: 8, teams: 3, components: 3, effort: 'M', sprints: 2, desiredDelivery: '28.2.2026', ddlProdSpec: '20.12.2025', notes: '', cmsUi: 'Vue' },
            { id: '12', title: 'Summary generator pre VLM (bez GITA)', category: 'AI', status: 'Prebieha', owner: 'radek.silbersky@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Február', roiIndex: '0.60', impactMoney: 3, impactMarket: 3, client: 'VLM', manDays: 8, teams: 3, components: 3, effort: 'M', sprints: 2, desiredDelivery: '28.2.2026', ddlProdSpec: '20.12.2025', notes: '', cmsUi: 'Vue' },
            { id: '13', title: 'HPM 2.0 Automat - P1D Case study a prenos na NČ', category: 'Feature', status: 'Prebieha', owner: 'radek.silbersky@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Február', roiIndex: '0.75', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 5, teams: 3, components: 3, effort: 'M', sprints: 1, desiredDelivery: '28.2.2026', ddlProdSpec: '3.1.2026', notes: '', cmsUi: 'Vue' },
            { id: '14', title: 'Piano Integration', category: 'BAS', status: 'Prebieha', owner: 'matus.zahradnik@newsandmedia.sk', size: 'L', impact: 'High', launch: 'Marec', roiIndex: '0.80', impactMoney: 4, impactMarket: 4, client: 'NMH', manDays: 10, teams: 4, components: 3, effort: 'L', sprints: 2, desiredDelivery: '31.3.2026', ddlProdSpec: '20.1.2026', notes: '', cmsUi: 'Unknown' },
            { id: '15', title: 'VLM Deník migrace / Spustenie', category: 'BAS', status: 'Prebieha', owner: 'radek.silbersky@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Marec', roiIndex: '0.64', impactMoney: 3, impactMarket: 4, client: 'VLM', manDays: 10, teams: 3, components: 3, effort: 'M', sprints: 2, desiredDelivery: '31.3.2026', ddlProdSpec: '20.1.2026', notes: '', cmsUi: 'Unknown' },
            { id: '16', title: 'TREND migrácia React Web .NET CMS', category: 'Tech upgrade', status: 'Prebieha', owner: 'tomas.valach@newsandmedia.sk', size: 'L', impact: 'Mid', launch: 'Marec', roiIndex: '0.53', impactMoney: 3, impactMarket: 4, client: 'NMH', manDays: 15, teams: 4, components: 6, effort: 'L', sprints: 3, desiredDelivery: '31.3.2026', ddlProdSpec: '6.1.2026', notes: '', cmsUi: 'Unknown' },
            { id: '17', title: 'MBASE migracia', category: 'Tech upgrade', status: 'Zastavené', owner: 'radek.silbersky@newsandmedia.sk', size: 'S', impact: 'Very Low', launch: 'Apríl', roiIndex: '0.25', impactMoney: 1, impactMarket: 1, client: 'NMH', manDays: 10, teams: 2, components: 1, effort: 'S', sprints: 2, desiredDelivery: '31.3.2026', ddlProdSpec: '3.2.2026', notes: 'Definovať scope na Q2', cmsUi: 'Unknown' },
            { id: '18', title: 'DAM Full-text search', category: 'Tech upgrade', status: 'Prebieha', owner: 'radek.silbersky@newsandmedia.sk', size: 'S', impact: 'Mid', launch: 'Február', roiIndex: '0.75', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 10, teams: 2, components: 2, effort: 'S', sprints: 2, desiredDelivery: '31.3.2026', ddlProdSpec: '3.2.2026', notes: 'Primárne search, rozdeliť epic na fázy po Q1', cmsUi: 'Vue' },
            { id: '19', title: 'Tagy 2.01 (post-deploy improvements)', category: 'AI', status: 'Prebieha', owner: 'lukas.saghy@newsandmedia.sk', size: 'L', impact: 'Mid', launch: 'Marec', roiIndex: '0.50', impactMoney: 3, impactMarket: 3, client: 'NMH', manDays: 15, teams: 4, components: 5, effort: 'L', sprints: 3, desiredDelivery: '31.3.2026', ddlProdSpec: '6.1.2026', notes: '', cmsUi: 'Vue' },
            { id: '20', title: 'Article stats 1.0', category: 'Feature', status: 'Ready na analýzu', owner: 'radek.silbersky@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Marec', roiIndex: '0.44', impactMoney: 2, impactMarket: 3, client: 'NMH + VLM', manDays: 10, teams: 3, components: 2, effort: 'M', sprints: 2, desiredDelivery: '31.3.2026', ddlProdSpec: '20.1.2026', notes: '', cmsUi: 'Vue' },
            { id: '21', title: 'Menu editor 1.0 (NMH)', category: 'Feature', status: 'Ready na analýzu', owner: 'lukas.saghy@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Marec', roiIndex: '0.75', impactMoney: 3, impactMarket: 3, client: 'NMH', manDays: 3, teams: 3, components: 1, effort: 'M', sprints: 1, desiredDelivery: '31.3.2026', ddlProdSpec: '3.2.2026', notes: '', cmsUi: 'Vue' },
            { id: '22', title: 'In-Article Podcast search & embedding 1.0', category: 'Feature', status: 'Idea - nevalidovaná', owner: '', size: 'M', impact: 'Mid', launch: 'Marec', roiIndex: '0.75', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 5, teams: 3, components: 2, effort: 'M', sprints: 1, desiredDelivery: '31.3.2026', ddlProdSpec: '3.2.2026', notes: '', cmsUi: 'Vue' },
            { id: '23', title: 'Integrace CMS Aqua - Gita', category: 'AI', status: 'Ready na analýzu', owner: 'radek.silbersky@newsandmedia.sk', size: 'L', impact: 'Mid', launch: 'Apríl', roiIndex: '0.50', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 15, teams: 4, components: 3, effort: 'L', sprints: 3, desiredDelivery: '31.3.2026', ddlProdSpec: '6.1.2026', notes: '', cmsUi: 'Unknown' },
            { id: '24', title: 'Sales videa v Livebox', category: 'BAS', status: 'Pripraviť prod. spec.', owner: 'karol.schulz@newsandmedia.sk', size: 'M', impact: 'Low', launch: 'Apríl', roiIndex: '0.28', impactMoney: 1, impactMarket: 3, client: 'NMH', manDays: 10, teams: 3, components: 1, effort: 'M', sprints: 2, desiredDelivery: '31.3.2026', ddlProdSpec: '20.1.2026', notes: '', cmsUi: 'Unknown' },
            { id: '25', title: 'Video Subtitles 2.0', category: 'AI', status: 'Idea - nevalidovaná', owner: 'viktor.koslab@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Apríl', roiIndex: '0.40', impactMoney: 2, impactMarket: 2, client: 'NMH + VLM', manDays: 10, teams: 3, components: 2, effort: 'M', sprints: 2, desiredDelivery: '30.4.2026', ddlProdSpec: '19.2.2026', notes: '', cmsUi: 'Vue' },
            { id: '26', title: 'Audio Transcription 2.0', category: 'AI', status: 'Idea - nevalidovaná', owner: 'viktor.koslab@newsandmedia.sk', size: 'L', impact: 'Mid', launch: 'Apríl', roiIndex: '0.60', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 10, teams: 3, components: 5, effort: 'L', sprints: 2, desiredDelivery: '30.4.2026', ddlProdSpec: '19.2.2026', notes: '', cmsUi: 'Vue' },
            { id: '27', title: 'Hero/Listing Image recommender 1.0', category: 'AI', status: 'Ready na analýzu', owner: 'viktor.koslab@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Apríl', roiIndex: '0.50', impactMoney: 3, impactMarket: 3, client: 'NMH', manDays: 15, teams: 3, components: 3, effort: 'M', sprints: 3, desiredDelivery: '30.4.2026', ddlProdSpec: '5.2.2026', notes: '', cmsUi: 'Vue' },
            { id: '28', title: 'TASR News Automated publishing', category: 'AI', status: 'Idea - nevalidovaná', owner: 'karol.schulz@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Apríl', roiIndex: '0.80', impactMoney: 3, impactMarket: 4, client: 'NMH', manDays: 5, teams: 1, components: 3, effort: 'M', sprints: 1, desiredDelivery: '30.4.2026', ddlProdSpec: '5.3.2026', notes: 'Spojiť s automatom aj s Trending topics.', cmsUi: 'Unknown' },
            { id: '29', title: 'In-Article Podcast Auto-embedding 2.0', category: 'Feature', status: 'Idea - nevalidovaná', owner: '', size: 'M', impact: 'Mid', launch: 'Máj', roiIndex: '0.75', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 5, teams: 3, components: 2, effort: 'M', sprints: 1, desiredDelivery: '31.5.2026', ddlProdSpec: '5.4.2026', notes: '', cmsUi: 'Vue' },
            { id: '30', title: 'Article Body Image Recommender', category: 'AI', status: 'Ready na analýzu', owner: 'viktor.koslab@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Máj', roiIndex: '0.75', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 5, teams: 3, components: 3, effort: 'M', sprints: 1, desiredDelivery: '31.5.2026', ddlProdSpec: '5.4.2026', notes: '', cmsUi: 'Vue' },
            { id: '31', title: 'Short Drama MVP', category: 'Feature', status: 'Pripraviť prod. spec.', owner: 'lukas.saghy@newsandmedia.sk', size: 'L', impact: 'High', launch: 'Jún', roiIndex: '0.40', impactMoney: 4, impactMarket: 4, client: 'NMH', manDays: 40, teams: 5, components: 1, effort: 'L', sprints: 7, desiredDelivery: '30.6.2026', ddlProdSpec: '10.2.2026', notes: '', cmsUi: 'React' },
            { id: '32', title: 'TASR Module Optimization Pack 1', category: 'Feature', status: 'Idea - nevalidovaná', owner: 'karol.schulz@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Máj', roiIndex: '0.60', impactMoney: 3, impactMarket: 3, client: 'NMH', manDays: 10, teams: 2, components: 3, effort: 'M', sprints: 2, desiredDelivery: '31.5.2026', ddlProdSpec: '22.3.2026', notes: '', cmsUi: 'Vue' },
            { id: '33', title: 'TASR News AI-Enhancing (Trend)', category: 'AI', status: 'Idea - Zvalidovaná', owner: 'karol.schulz@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Máj', roiIndex: '0.64', impactMoney: 3, impactMarket: 4, client: 'NMH', manDays: 10, teams: 3, components: 2, effort: 'M', sprints: 2, desiredDelivery: '31.5.2026', ddlProdSpec: '22.3.2026', notes: '', cmsUi: 'Unknown' },
            { id: '34', title: 'Editorial Performance - Subs, Video, Seo, ext. perf.', category: 'Feature', status: 'Idea - nevalidovaná', owner: 'viktor.koslab@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Máj', roiIndex: '0.33', impactMoney: 2, impactMarket: 2, client: 'NMH', manDays: 15, teams: 2, components: 1, effort: 'M', sprints: 3, desiredDelivery: '31.5.2026', ddlProdSpec: '8.3.2026', notes: '', cmsUi: 'Vue' },
            { id: '35', title: 'DAM upgrade Q2 (TBD)', category: 'Feature', status: 'Pripraviť prod. spec.', owner: 'radek.silbersky@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Jún', roiIndex: '0.50', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 15, teams: 2, components: 1, effort: 'M', sprints: 3, desiredDelivery: '30.6.2026', ddlProdSpec: '7.4.2026', notes: '', cmsUi: 'Vue' },
            { id: '36', title: 'SEO Copilot / Asistent redaktora', category: 'AI', status: 'Pripraviť prod. spec.', owner: 'lukas.saghy@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Jún', roiIndex: '0.53', impactMoney: 3, impactMarket: 4, client: 'NMH + VLM', manDays: 15, teams: 3, components: 3, effort: 'M', sprints: 3, desiredDelivery: '30.6.2026', ddlProdSpec: '7.4.2026', notes: 'Spojiť s VLM, zlúčiť aj s linkbuilding agent.', cmsUi: 'Vue' },
            { id: '37', title: 'Vytváranie koláží z obrázkov', category: 'Feature', status: 'Idea - Zvalidovaná', owner: 'lukas.saghy@newsandmedia.sk', size: 'S', impact: 'Mid', launch: 'Jún', roiIndex: '1.00', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 5, teams: 2, components: 1, effort: 'S', sprints: 1, desiredDelivery: '30.6.2026', ddlProdSpec: '19.5.2026', notes: 'Zvážiť spojenie s DAM upgrade Q2', cmsUi: 'Vue' },
            { id: '38', title: 'Tagy 2.1', category: 'AI', status: 'Pripraviť prod. spec.', owner: 'lukas.saghy@newsandmedia.sk', size: 'L', impact: 'Mid', launch: 'Jún', roiIndex: '0.50', impactMoney: 3, impactMarket: 3, client: 'NMH', manDays: 15, teams: 4, components: 6, effort: 'L', sprints: 3, desiredDelivery: '30.6.2026', ddlProdSpec: '7.4.2026', notes: '', cmsUi: 'Vue' },
            { id: '39', title: 'Tech dept 2025', category: 'Tech upgrade', status: 'Prebieha', owner: 'tomas.mikeska@newsandmedia.sk', size: 'L', impact: 'Low', launch: 'Jún', roiIndex: '0.08', impactMoney: 1, impactMarket: 1, client: 'NMH + VLM', manDays: 50, teams: 2, components: 5, effort: 'L', sprints: 9, desiredDelivery: '30.6.2026', ddlProdSpec: '13.1.2026', notes: 'Meet s develom pre potvrdenie', cmsUi: 'Unknown' },
            { id: '40', title: 'Elasticsearch 9', category: 'Tech upgrade', status: 'Ready na analýzu', owner: 'tomas.mikeska@newsandmedia.sk', size: 'M', impact: 'Low', launch: 'Jún', roiIndex: '0.33', impactMoney: 2, impactMarket: 2, client: 'NMH + VLM', manDays: 15, teams: 2, components: 2, effort: 'M', sprints: 3, desiredDelivery: '30.6.2026', ddlProdSpec: '7.4.2026', notes: 'Meet s develom pre potvrdenie', cmsUi: 'Unknown' },
            { id: '41', title: 'Body block Kvíz v článku s AI generátorom kvízov', category: 'AI', status: 'Idea - Zvalidovaná', owner: 'lukas.saghy@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Jún', roiIndex: '0.60', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 10, teams: 3, components: 3, effort: 'M', sprints: 2, desiredDelivery: '30.6.2026', ddlProdSpec: '21.4.2026', notes: '', cmsUi: 'React' },
            { id: '42', title: 'DAM Integrácia free fotobánk', category: 'Feature', status: 'Idea - nevalidovaná', owner: 'radek.silbersky@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Jún', roiIndex: '0.53', impactMoney: 3, impactMarket: 4, client: 'NMH + VLM', manDays: 15, teams: 2, components: 1, effort: 'M', sprints: 3, desiredDelivery: '30.6.2026', ddlProdSpec: '7.4.2026', notes: '', cmsUi: 'Vue' },
            { id: '43', title: 'DAM Taxonomia obrazkov (tagy, img alt tag, gallery desc...)', category: 'AI', status: 'Idea - Zvalidovaná', owner: 'radek.silbersky@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Jún', roiIndex: '0.50', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 15, teams: 3, components: 2, effort: 'M', sprints: 3, desiredDelivery: '30.6.2026', ddlProdSpec: '7.4.2026', notes: 'Zvážiť rozdelenie na min. 2 fázy', cmsUi: 'Vue' },
            { id: '44', title: 'CMS Lab / App store (Inovation Incubator)', category: 'AI', status: 'Idea - Zvalidovaná', owner: 'lukas.saghy@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Jún', roiIndex: '0.80', impactMoney: 3, impactMarket: 4, client: 'NMH', manDays: 5, teams: 2, components: 3, effort: 'M', sprints: 1, desiredDelivery: '30.6.2026', ddlProdSpec: '5.5.2026', notes: '', cmsUi: 'React' },
            { id: '45', title: 'SEO Content Checker v1.1 [Lemmatizácia + sémantika]', category: 'AI', status: 'Idea - Zvalidovaná', owner: '', size: 'L', impact: 'Low', launch: 'Jún', roiIndex: '0.28', impactMoney: 1, impactMarket: 3, client: 'NMH + VLM', manDays: 10, teams: 4, components: 2, effort: 'L', sprints: 2, desiredDelivery: '30.6.2026', ddlProdSpec: '21.4.2026', notes: '', cmsUi: 'Vue' },
            { id: '46', title: 'Virtuálny CMS developer PoC', category: 'AI', status: 'Idea - nevalidovaná', owner: 'lukas.saghy@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Jún', roiIndex: '0.60', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 10, teams: 3, components: 1, effort: 'M', sprints: 2, desiredDelivery: '30.6.2026', ddlProdSpec: '21.4.2026', notes: 'Virtuálny developer (agent) vedel z Jira tasku', cmsUi: 'Unknown' },
            { id: '47', title: 'Virtuálny CMS PM/BA PoC', category: 'AI', status: 'Idea - nevalidovaná', owner: 'lukas.saghy@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'Jún', roiIndex: '0.60', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 10, teams: 3, components: 1, effort: 'M', sprints: 2, desiredDelivery: '30.6.2026', ddlProdSpec: '21.4.2026', notes: 'Zozbierať pár jednoduchých taskov', cmsUi: 'Unknown' },
            { id: '48', title: 'Article Gallery Composer', category: 'AI', status: 'Idea - Zvalidovaná', owner: 'viktor.koslab@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'September', roiIndex: '0.64', impactMoney: 3, impactMarket: 4, client: 'NMH + VLM', manDays: 10, teams: 3, components: 4, effort: 'M', sprints: 2, desiredDelivery: '30.9.2026', ddlProdSpec: '22.7.2026', notes: '', cmsUi: 'React' },
            { id: '49', title: 'Real-Time Stats 2.0', category: 'Feature', status: 'Idea - nevalidovaná', owner: 'viktor.koslab@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'September', roiIndex: '0.50', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 20, teams: 3, components: 2, effort: 'M', sprints: 3, desiredDelivery: '30.9.2026', ddlProdSpec: '8.7.2026', notes: '', cmsUi: 'Vue' },
            { id: '50', title: 'Video Stats 2.0', category: 'Feature', status: 'Idea - nevalidovaná', owner: 'viktor.koslab@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'September', roiIndex: '0.60', impactMoney: 3, impactMarket: 3, client: 'NMH', manDays: 10, teams: 3, components: 2, effort: 'M', sprints: 2, desiredDelivery: '30.9.2026', ddlProdSpec: '22.7.2026', notes: '', cmsUi: 'Vue' },
            { id: '51', title: 'Article AI Copilot 1.0', category: 'AI', status: 'Idea - Zvalidovaná', owner: 'viktor.koslab@newsandmedia.sk', size: 'L', impact: 'High', launch: 'September', roiIndex: '0.33', impactMoney: 4, impactMarket: 4, client: 'NMH + VLM', manDays: 50, teams: 4, components: 3, effort: 'L', sprints: 9, desiredDelivery: '30.9.2026', ddlProdSpec: '15.4.2026', notes: 'Koordinovať s VLM.', cmsUi: 'React' },
            { id: '52', title: 'Real-Time Copilot 1.0', category: 'AI', status: 'Idea - nevalidovaná', owner: 'viktor.koslab@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'September', roiIndex: '0.60', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 10, teams: 3, components: 3, effort: 'M', sprints: 2, desiredDelivery: '30.9.2026', ddlProdSpec: '22.7.2026', notes: '', cmsUi: 'React' },
            { id: '53', title: 'Editorial Performance Copilot 1.0', category: 'AI', status: 'Idea - Zvalidovaná', owner: 'viktor.koslab@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'September', roiIndex: '0.60', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 10, teams: 3, components: 3, effort: 'M', sprints: 2, desiredDelivery: '30.9.2026', ddlProdSpec: '22.7.2026', notes: '', cmsUi: 'React' },
            { id: '54', title: 'Kompletný výsledkový servis | S24 + ŠČ', category: 'Feature', status: 'Idea - nevalidovaná', owner: '', size: 'M', impact: 'Mid', launch: 'TBD', roiIndex: '0.40', impactMoney: 2, impactMarket: 2, client: '', manDays: 10, teams: 3, components: 2, effort: 'M', sprints: 2, desiredDelivery: '', ddlProdSpec: '', notes: '', cmsUi: 'Unknown' },
            { id: '55', title: 'Article Gallery Composer - Story Mode', category: 'AI', status: 'Idea - Zvalidovaná', owner: 'viktor.koslab@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'December', roiIndex: '0.64', impactMoney: 3, impactMarket: 4, client: 'NMH + VLM', manDays: 10, teams: 3, components: 4, effort: 'M', sprints: 2, desiredDelivery: '31.12.2026', ddlProdSpec: '22.10.2026', notes: '', cmsUi: 'React' },
            { id: '56', title: 'Editorial Peformance - Gamification', category: 'Feature', status: 'Idea - nevalidovaná', owner: 'viktor.koslab@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'December', roiIndex: '0.50', impactMoney: 3, impactMarket: 3, client: 'NMH', manDays: 15, teams: 3, components: 3, effort: 'M', sprints: 3, desiredDelivery: '31.12.2026', ddlProdSpec: '8.10.2026', notes: '', cmsUi: 'React' },
            { id: '57', title: 'Related articles 2.0 - Automation', category: 'AI', status: 'Idea - nevalidovaná', owner: 'karol.schulz@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'December', roiIndex: '0.55', impactMoney: 2, impactMarket: 3, client: 'NMH + VLM', manDays: 5, teams: 2, components: 3, effort: 'M', sprints: 1, desiredDelivery: '31.12.2026', ddlProdSpec: '5.11.2026', notes: 'Má záujem aj VLM', cmsUi: 'Unknown' },
            { id: '58', title: 'Livebox - videa', category: 'Tech upgrade', status: 'Pripraviť prod. spec.', owner: 'radek.silbersky@newsandmedia.sk', size: 'S', impact: 'Mid', launch: 'December', roiIndex: '0.50', impactMoney: 2, impactMarket: 2, client: 'NMH + VLM', manDays: 10, teams: 2, components: 1, effort: 'S', sprints: 2, desiredDelivery: '31.12.2026', ddlProdSpec: '5.11.2026', notes: 'Zlúčiť s bodom nižšie', cmsUi: 'Unknown' },
            { id: '59', title: 'Video improvements (Livebox)', category: 'Feature', status: 'Pripraviť prod. spec.', owner: 'radek.silbersky@newsandmedia.sk', size: 'S', impact: 'Mid', launch: 'December', roiIndex: '0.50', impactMoney: 2, impactMarket: 2, client: 'NMH + VLM', manDays: 10, teams: 2, components: 1, effort: 'S', sprints: 2, desiredDelivery: '31.12.2026', ddlProdSpec: '5.11.2026', notes: '', cmsUi: 'Unknown' },
            { id: '60', title: 'Admin Management Notifikácií v CMS & Release komunikácia', category: 'Tech upgrade', status: 'Ready na vývoj', owner: 'karol.schulz@newsandmedia.sk', size: 'M', impact: 'Low', launch: 'TBD', roiIndex: '0.40', impactMoney: 2, impactMarket: 2, client: 'NMH + VLM', manDays: 11, teams: 2, components: 1, effort: 'M', sprints: 2, desiredDelivery: '31.12.2026', ddlProdSpec: '22.10.2026', notes: '', cmsUi: 'React' },
            { id: '61', title: 'Tagy 3.0 (image + gallery + video tagy, AI gen. content, BB editor)', category: 'AI', status: 'Idea - nevalidovaná', owner: 'lukas.saghy@newsandmedia.sk', size: 'L', impact: 'Mid', launch: 'TBD', roiIndex: '0.33', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 30, teams: 5, components: 7, effort: 'L', sprints: 6, desiredDelivery: '31.12.2026', ddlProdSpec: '27.8.2026', notes: '', cmsUi: 'React' },
            { id: '62', title: 'Headline ABC Testing 2.0', category: 'AI', status: 'Idea - nevalidovaná', owner: 'karol.schulz@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'TBD', roiIndex: '0.60', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 10, teams: 3, components: 3, effort: 'M', sprints: 2, desiredDelivery: '31.12.2026', ddlProdSpec: '22.10.2026', notes: '', cmsUi: 'React' },
            { id: '63', title: 'Poll Generator 2.0 - Proactive in-article suggestions', category: 'AI', status: 'Idea - Zvalidovaná', owner: 'lukas.saghy@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'TBD', roiIndex: '0.75', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 5, teams: 2, components: 3, effort: 'M', sprints: 1, desiredDelivery: '31.12.2026', ddlProdSpec: '5.11.2026', notes: '', cmsUi: 'React' },
            { id: '64', title: 'Quiz Generator 2.0 - Fact checking, rýchlejšie gen.', category: 'AI', status: 'Idea - Zvalidovaná', owner: 'lukas.saghy@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'TBD', roiIndex: '0.60', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 10, teams: 2, components: 3, effort: 'M', sprints: 2, desiredDelivery: '31.12.2026', ddlProdSpec: '22.10.2026', notes: '', cmsUi: 'React' },
            { id: '65', title: 'Reels / Slideshow / Illustration video generator', category: 'AI', status: 'Idea - nevalidovaná', owner: 'lukas.saghy@newsandmedia.sk', size: 'M', impact: 'Mid', launch: 'TBD', roiIndex: '0.50', impactMoney: 3, impactMarket: 3, client: 'NMH + VLM', manDays: 15, teams: 3, components: 3, effort: 'M', sprints: 3, desiredDelivery: '31.12.2026', ddlProdSpec: '8.10.2026', notes: '', cmsUi: 'React' },
            { id: '66', title: 'Social Media Management Tool - MVP', category: 'AI', status: 'Idea - nevalidovaná', owner: 'karol.schulz@newsandmedia.sk', size: 'L', impact: 'High', launch: 'TBD', roiIndex: '0.33', impactMoney: 4, impactMarket: 4, client: 'NMH + VLM', manDays: 50, teams: 3, components: 6, effort: 'L', sprints: 9, desiredDelivery: '', ddlProdSpec: '', notes: '', cmsUi: 'React' },
            { id: '67', title: 'Ochorenia - Zoradenie podľa abecedy', category: 'BAS', status: 'Idea - nevalidovaná', owner: 'filip.mackov@newsandmedia.sk', size: 'S', impact: 'Very Low', launch: 'TBD', roiIndex: '0.35', impactMoney: 1, impactMarket: 3, client: 'NMH', manDays: 10, teams: 2, components: 1, effort: 'S', sprints: 2, desiredDelivery: '', ddlProdSpec: '', notes: '', cmsUi: 'Unknown' },
        ];

        // --- UTILS ---
        const monthNames2026 = ['Január','Február','Marec','Apríl','Máj','Jún','Júl','August','September','Október','November','December'];
        const monthIndexFromLaunch = (launch) => {
            if (!launch) return null;
            const m = String(launch).toLowerCase().trim();
            if (m === 'tbd') return null;
            const idx = monthNames2026.findIndex(mon => mon.toLowerCase() === m);
            return idx >= 0 ? idx : null;
        };

        const getQuarter = (month) => {
            const m = month?.toLowerCase().trim();
            if (['január', 'február', 'marec', 'q1'].includes(m)) return 'Q1';
            if (['apríl', 'máj', 'jún', 'q2'].includes(m)) return 'Q2';
            if (['júl', 'august', 'september', 'q3'].includes(m)) return 'Q3';
            if (['október', 'november', 'december', 'q4'].includes(m)) return 'Q4';
            return 'TBD';
        };

        const getImpactScore = (impact) => {
            switch (String(impact || '').toLowerCase()) {
                case 'very high': return 4;
                case 'high': return 3;
                case 'mid': return 2;
                case 'low': return 1;
                case 'very low': return 0;
                default: return -1;
            }
        };

        const getSizeScore = (size) => {
            switch (String(size || '').toUpperCase()) {
                case 'XS': return 1;
                case 'S': return 2;
                case 'M': return 3;
                case 'L': return 4;
                case 'XL': return 5;
                case 'XXL': return 6;
                default: return -1;
            }
        };

        const getRoiColor = (roi) => {
            const val = parseFloat(roi);
            if (isNaN(val)) return 'bg-gray-100 text-gray-500';
            if (val >= 0.6) return 'bg-green-100 text-green-700 font-bold';
            if (val >= 0.4) return 'bg-blue-100 text-blue-700';
            if (val >= 0.2) return 'bg-orange-100 text-orange-700';
            return 'bg-gray-100 text-gray-500';
        };

        // --- ROI FILTER HELPERS ---
        const getRoiRange = (val) => {
            const n = parseFloat(val);
            if (isNaN(n)) return 'Neznáme';
            if (n < 0.40) return 'Nízky (<0,4)';
            if (n < 0.80) return 'Stredný (0,4 - 0,8)';
            return 'Vysoký (>0,8)';
        };

        const getMissingFields = (item) => {
            const missing = [];
            if (getImpactScore(item.impact) === -1) missing.push('Impact');
            if (getSizeScore(item.size) === -1) missing.push('Effort');
            return missing;
        };

        const getCategoryColor = (cat) => {
            const c = String(cat || '').toUpperCase();
            if (c === 'AI') return 'bg-purple-100 text-purple-700 border-purple-200';
            if (c === 'FEATURE') return 'bg-blue-100 text-blue-700 border-blue-200';
            if (c === 'BAS') return 'bg-gray-100 text-gray-700 border-gray-200';
            if (c === 'TECH UPGRADE') return 'bg-green-100 text-green-700 border-green-200';
            return 'bg-gray-50 text-gray-500 border-gray-200';
        };

        const getImpactColor = (impact) => {
            if (impact === 'High') return 'text-green-600 bg-green-50';
            if (impact === 'Mid') return 'text-blue-600 bg-blue-50';
            if (impact === 'Low') return 'text-gray-500 bg-gray-50';
            return 'text-gray-400';
        };

        // --- STATUS ICON HELPER ---
        const getStatusIcon = (status) => {
            const s = String(status || '').toLowerCase();
            if (s.includes('doručené')) return <Icons.CheckCircle size={14} className="text-green-500 flex-shrink-0" />;
            if (s.includes('prebieha')) return <Icons.RefreshCw size={14} className="text-blue-500 animate-spin-slow flex-shrink-0" />;
            if (s.includes('idea') || s.includes('zastavené') || s.includes('nevalidovaná')) return <Icons.StopCircle size={14} className="text-slate-400 flex-shrink-0" />;
            // default
            return <Icons.HelpCircle size={14} className="text-slate-300 flex-shrink-0" />;
        };

        const sanitizeTitle = (title) => {
            if (!title) return '';
            return title.replace(/^CMSD-\d{3,4}:\s*/i, '').trim();
        };

        // --- Helpers for Gantt Roadmap ---
        const sprintsFromSize = (size) => {
            if (!size) return 4; // default
            switch (String(size).toUpperCase()) {
                case 'XS': return 1;   // ~0.5 month
                case 'S': return 2;    // 1 month
                case 'M': return 4;    // 2 months
                case 'L': return 6;    // 3 months
                case 'XL': return 8;   // 4 months
                case 'XXL': return 10; // 5 months
                default: return 4;
            }
        };

        const barColorForCategory = (cat) => {
            const c = String(cat || '').toUpperCase();
            if (c === 'AI') return 'bg-purple-500';
            if (c === 'FEATURE') return 'bg-blue-500';
            if (c === 'BAS') return 'bg-gray-400';
            if (c === 'TECH UPGRADE') return 'bg-green-500';
            return 'bg-slate-400';
        };

        // --- EDITABLE JIRA LINK (simple) ---
        const EditableJiraLink = ({ item, onUpdate }) => {
            const [editing, setEditing] = useState(false);
            const [value, setValue] = useState(item.jiraUrl || '');
            useEffect(() => setValue(item.jiraUrl || ''), [item.jiraUrl]);

            const isValidUrl = (u) => {
                if (!u) return true;
                try { const p = new URL(u); return p.protocol === 'http:' || p.protocol === 'https:'; } catch { return false; }
            };

            const save = () => {
                if (!isValidUrl(value)) return alert('Neplatná URL (musí začínať http:// alebo https://)');
                setEditing(false);
                onUpdate(item.id, { jiraUrl: value || undefined });
            };

            return (
                <div className="relative inline-flex items-center">
                    <button onClick={() => setEditing(true)} title={item.jiraUrl ? 'Upraviť Jira URL' : 'Pridať Jira URL'} className="p-1 rounded text-slate-500 hover:bg-slate-100 opacity-90">
                        <Icons.Link size={14} />
                    </button>
                    {editing && (
                        <div className="absolute z-30 mt-2 p-3 bg-white rounded shadow border border-slate-100" style={{ minWidth: 280 }}>
                            <div className="text-xs text-slate-600 mb-2">Jira epic URL</div>
                            <input value={value} onChange={(e) => setValue(e.target.value)} className="w-full p-2 border rounded text-sm border-slate-200 mb-2" placeholder="https://..." />
                            <div className="flex gap-2 justify-end">
                                <button onClick={() => setEditing(false)} className="px-3 py-1 rounded border text-sm">Zrušiť</button>
                                <button onClick={save} className="px-3 py-1 rounded bg-blue-600 text-white text-sm">Uložiť</button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // --- TITLE EDITOR (simple) ---
        const TitleEditor = ({ item, onUpdate }) => {
            const [editing, setEditing] = useState(false);
            const [value, setValue] = useState(item.title || '');
            useEffect(() => setValue(item.title || ''), [item.title]);
            const save = () => { setEditing(false); if ((value.trim() || item.title) !== item.title) onUpdate(item.id, { title: value.trim() || item.title }); };
            return (
                <div className="relative inline-flex items-center">
                    <button onClick={() => setEditing(true)} title="Upraviť názov" className="p-1 rounded text-slate-500 hover:bg-slate-100">
                        <Icons.Pencil size={14} />
                    </button>
                    {editing && (
                        <div className="absolute z-30 mt-2 p-3 bg-white rounded shadow border border-slate-100" style={{ minWidth: 300 }}>
                            <div className="text-xs text-slate-600 mb-2">Úprava názvu</div>
                            <input value={value} onChange={(e) => setValue(e.target.value)} className="w-full p-2 border rounded text-sm border-slate-200 mb-2" />
                            <div className="flex gap-2 justify-end">
                                <button onClick={() => { setEditing(false); setValue(item.title || ''); }} className="px-3 py-1 rounded border text-sm">Zrušiť</button>
                                <button onClick={save} className="px-3 py-1 rounded bg-blue-600 text-white text-sm">Uložiť</button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // --- MULTI-SELECT FILTER COMPONENT ---
        const MultiSelectFilter = ({ label, icon: Icon, options, selected, onChange, title }) => {
            const [isOpen, setIsOpen] = useState(false);

            const toggleOption = (opt) => {
                if (selected.includes(opt)) {
                    onChange(selected.filter(s => s !== opt));
                } else {
                    onChange([...selected, opt]);
                }
            };

            const toggleAll = () => {
                if (selected.length > 0) onChange([]);
            }

            return (
                <div className="relative">
                    <button
                        onClick={() => setIsOpen(!isOpen)}
                        className={`flex items-center gap-2 px-3 py-1 rounded-full text-xs font-medium border transition-colors ${selected.length > 0 ? 'bg-blue-50 border-blue-200 text-blue-700' : 'bg-white border-slate-200 text-slate-600 hover:bg-slate-50'}`}
                        title={title}
                    >
                        {Icon && <Icon size={14} />}
                        <span>{selected.length > 0 ? `${label} (${selected.length})` : label}</span>
                    </button>

                    {isOpen && (
                        <>
                            <div className="fixed inset-0 z-40" onClick={() => setIsOpen(false)}></div>
                            <div className="absolute top-full mt-2 left-0 bg-white border border-slate-200 shadow-xl rounded-lg p-2 w-64 z-50 max-h-80 overflow-y-auto scrollbar-hide">
                                <div className="text-xs font-bold text-slate-400 px-2 py-1 uppercase tracking-wider mb-1">Vybrať {label.toLowerCase()}</div>
                                {options.map(opt => {
                                    const displayName = opt ? (opt.includes('@') ? opt.split('@')[0] : opt) : 'Nezaradené';
                                    const isSelected = selected.includes(opt);
                                    return (
                                        <div key={opt} onClick={() => toggleOption(opt)} className={`flex items-center gap-2 p-2 cursor-pointer rounded text-xs transition-colors ${isSelected ? 'bg-blue-50 text-blue-700' : 'text-slate-700 hover:bg-slate-50'}`}>
                                            <div className={`w-4 h-4 rounded border flex items-center justify-center ${isSelected ? 'bg-blue-500 border-blue-500' : 'border-slate-300 bg-white'}`}>
                                                {isSelected && <svg className="w-3 h-3 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={3} d="M5 13l4 4L19 7" /></svg>}
                                            </div>
                                            <span className="truncate flex-1" title={opt}>{displayName}</span>
                                        </div>
                                    );
                                })}
                                <div className="pt-2 mt-2 border-t border-slate-100">
                                    <button onClick={toggleAll} className={`text-xs w-full text-center py-1 rounded ${selected.length === 0 ? 'text-slate-400 cursor-default' : 'text-blue-600 hover:bg-blue-50'}`} disabled={selected.length === 0}>
                                        Zrušiť filter
                                    </button>
                                </div>
                            </div>
                        </>
                    )}
                </div>
            );
        };


        // --- COMPONENTS ---
        const StrategyBoard = () => (
            <div className="bg-gradient-to-r from-slate-900 to-slate-800 text-white p-6 rounded-2xl shadow-lg mb-8">
                <div className="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                    <div>
                        <h2 className="text-xs font-bold tracking-widest text-blue-300 uppercase mb-2">Produktová Vízia 2026</h2>
                        <h1 className="text-2xl md:text-3xl font-bold leading-tight">
                            EAGLE CMS ako <span className="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-400">Inteligentný Copilot redakcie</span>
                        </h1>
                        <p className="text-slate-300 mt-2 text-sm whitespace-nowrap md:whitespace-normal">
                            Zvyšovanie efektivity redakcie pomocou AI a automatizácie, s využitím historických dát, aktuálnych trendov a predikcií.
                        </p>
                    </div>
                    <div className="flex gap-3">
                        <div className="bg-white/10 backdrop-blur-sm p-3 rounded-lg border border-white/10 text-center">
                            <div className="text-2xl font-bold text-purple-300">50%</div>
                            <div className="text-xs text-slate-300">AI Features</div>
                        </div>
                        <div className="bg-white/10 backdrop-blur-sm p-3 rounded-lg border border-white/10 text-center">
                            <div className="text-2xl font-bold text-blue-300">Focus Q1</div>
                            <div className="text-xs text-slate-300">TREND, Tagy 2.0, Premium Video, VLM Denik</div>
                        </div>
                    </div>
                </div>
            </div>
        );

        const Card = ({ item, onUpdate }) => {
            const missing = getMissingFields(item);
            const isInvalid = missing.length > 0;
            return (
                <div className={`p-4 rounded-xl shadow-sm border group relative ${isInvalid ? 'bg-gray-50 border-dashed border-gray-200/70' : 'bg-white border-slate-100 hover:shadow-md'}`}>
                    {item.status === 'Zastavené' && (
                        <div className="absolute top-2 right-2 text-red-400" title="Zastavené">
                            <Icons.AlertCircle size={16} />
                        </div>
                    )}

                    {isInvalid && (
                        <div className="absolute top-2 left-2">
                            <div className="px-2 py-0.5 rounded-full bg-slate-100 text-slate-600 text-xs font-semibold">Not ready</div>
                        </div>
                    )}

                    <div className="flex justify-between items-start mb-2">
                        <span className={`text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wider ${getCategoryColor(item.category)}`}>
                            {item.category}
                        </span>
                        {item.impact === 'High' && (
                            <span className="flex items-center gap-1 text-[10px] font-bold text-green-600 bg-green-50 px-2 py-0.5 rounded-full">
                                <Icons.Zap size={10} /> Impact
                            </span>
                        )}
                    </div>

                    <h3 className={`text-sm font-semibold ${isInvalid ? 'text-slate-700' : 'text-slate-800'} leading-tight mb-3`}>
                        <div className="flex items-center gap-2">
                            <div className="flex-1">
                                {item.jiraUrl ? (
                                    <a href={item.jiraUrl} target="_blank" rel="noopener noreferrer" className="underline decoration-dotted underline-offset-2">
                                        {sanitizeTitle(item.title)}
                                    </a>
                                ) : (
                                    <span>{sanitizeTitle(item.title)}</span>
                                )}
                                {item.notes && <div className="text-xs text-slate-400 mt-0.5 font-normal">{item.notes}</div>}
                            </div>

                            {/* HOVER VISIBILITY */}
                            <div className="flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                                <EditableJiraLink item={item} onUpdate={onUpdate} />
                                <TitleEditor item={item} onUpdate={onUpdate} />
                            </div>
                        </div>
                    </h3>

                    <div className="flex items-center justify-between text-xs text-slate-400 mt-auto pt-2 border-t border-slate-50">
                        <div className="flex items-center gap-2">
                            <span title="Veľkosť / Effort" className="font-mono bg-slate-100 px-1.5 rounded text-slate-600">{item.size}</span>
                            <span title="Vlastník">{(item.owner || '').split('.')[0]}</span>
                        </div>
                        {item.launch && item.launch !== 'TBD' && <span className="text-blue-500 font-medium">{item.launch}</span>}
                    </div>
                </div>
            );
        };

        const QuickWins = ({ items, onUpdate }) => {
            const quickWins = items.filter(i =>
                (i.impact === 'High' || i.impact === 'Mid') &&
                (i.size === 'S' || i.size === 'M') &&
                i.status !== 'Zastavené'
            );

            return (
                <div className="mb-8 bg-green-50 border border-green-100 rounded-xl p-5">
                    <div className="flex items-center gap-2 mb-4">
                        <div className="p-2 bg-green-100 rounded-lg text-green-700"><Icons.Zap size={20} /></div>
                        <div>
                            <h3 className="text-lg font-bold text-slate-800">Quick Wins & High Value</h3>
                            <p className="text-sm text-slate-500">Najlepší pomer cena/výkon pre najbližší vývoj.</p>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        {quickWins.length > 0 ? quickWins.map(item => (
                            <div key={item.id} className="p-3 rounded-lg shadow-sm border bg-white flex justify-between items-center group">
                                <div className="flex-1">
                                    <div className="text-xs text-green-600 font-bold mb-1">{item.impact} Impact • {item.size} Effort</div>
                                    <div className="text-sm font-medium text-slate-800 flex items-center">
                                        <div className="flex-1">{sanitizeTitle(item.title)}</div>
                                        {/* HOVER VISIBILITY */}
                                        <div className="flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                                            <EditableJiraLink item={item} onUpdate={onUpdate} />
                                            <TitleEditor item={item} onUpdate={onUpdate} />
                                        </div>
                                    </div>
                                </div>
                                <Icons.ArrowRight size={16} className="text-green-300" />
                            </div>
                        )) : <div className="text-sm text-slate-500 italic">Žiadne jasné quick wins momentálne neidentifikované v dátach.</div>}
                    </div>
                </div>
            );
        };

        // --- GANTT ROADMAP COMPONENT (Updated with Sticky Header) ---
        const GanttRoadmap = ({ items }) => {
            const rows = items.map(it => {
                const deliveryIdx = monthIndexFromLaunch(it.launch); 
                const sprints = (typeof it.sprints === 'number') ? it.sprints : sprintsFromSize(it.size);
                const monthsDuration = Math.max(1, Math.ceil(sprints / 2)); 
                let startIdx = null;
                if (deliveryIdx !== null) {
                    startIdx = deliveryIdx - (monthsDuration - 1);
                    if (startIdx < 0) startIdx = 0;
                }
                return { ...it, deliveryIdx, startIdx, sprints, monthsDuration };
            });

            const totalCols = 13; // 12 months + Future
            return (
                <div className="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                    <div className="mt-2">
                        {/* Scrollable Container */}
                        <div className="overflow-auto max-h-[600px] relative">
                            {/* Sticky Header */}
                            <div className="sticky top-0 z-10 bg-white border-b border-slate-200">
                                <div className="flex items-end gap-4 pb-2">
                                    <div className="w-64 flex justify-between items-end pr-4 flex-shrink-0 bg-white z-20 sticky left-0">
                                        <div className="text-sm font-semibold text-slate-700">Funkcia</div>
                                        <div className="text-xs font-semibold text-slate-400">ROI</div>
                                    </div>
                                    <div className="flex-1 min-w-[800px]">
                                        <div className="grid grid-cols-12 mb-1 pl-[1px]">
                                             <div className="col-span-3 text-center text-xs text-slate-400 font-semibold bg-slate-50/50 rounded-t mx-0.5">Q1</div>
                                             <div className="col-span-3 text-center text-xs text-slate-400 font-semibold bg-slate-50/50 rounded-t mx-0.5">Q2</div>
                                             <div className="col-span-3 text-center text-xs text-slate-400 font-semibold bg-slate-50/50 rounded-t mx-0.5">Q3</div>
                                             <div className="col-span-3 text-center text-xs text-slate-400 font-semibold bg-slate-50/50 rounded-t mx-0.5">Q4</div>
                                        </div>
                                        <div className="grid" style={{ gridTemplateColumns: `repeat(${totalCols}, minmax(0, 1fr))` }}>
                                            {monthNames2026.map(m => <div key={m} className="text-xs text-slate-500 text-center py-2 border-r border-slate-300 bg-slate-50">{m.slice(0,3)}</div>)}
                                            {/* Fix: No right border for last column */}
                                            <div className="text-xs text-slate-500 text-center py-2 bg-slate-50">2027+</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Body Rows */}
                            <div className="space-y-3 pt-3">
                                {rows.map(row => {
                                    const hasDelivery = row.deliveryIdx !== null;
                                    const start = row.startIdx === null ? 0 : row.startIdx;
                                    const end = row.deliveryIdx;
                                    const clampedStart = Math.max(0, Math.min(11, start));
                                    const clampedEnd = Math.max(0, Math.min(11, end));
                                    const gridColStart = clampedStart + 1;
                                    const gridColEnd = clampedEnd + 2; 
                                    const leftPercent = ((gridColStart - 1) * (100 / totalCols));
                                    const widthPercent = Math.max(100 / totalCols, (gridColEnd - gridColStart) * (100 / totalCols));

                                    return (
                                        <div key={row.id} className="flex items-center gap-4 group">
                                            {/* Sticky Left Column */}
                                            <div className="w-64 flex-shrink-0 bg-white z-0 sticky left-0">
                                                <div className="flex items-center justify-between text-xs text-slate-800 font-medium pr-4">
                                                    <div className="flex items-center gap-2 overflow-hidden">
                                                        {getStatusIcon(row.status)}
                                                        <span className="truncate">{sanitizeTitle(row.title)}</span>
                                                    </div>
                                                    <span className={`text-[10px] px-1.5 py-0.5 rounded ml-2 whitespace-nowrap ${getRoiColor(row.roiIndex)}`} title="ROI Index">
                                                        {row.roiIndex}
                                                    </span>
                                                </div>
                                            </div>
                                            
                                            {/* Scrollable Right Side */}
                                            <div className="flex-1 min-w-[800px]">
                                                {hasDelivery ? (
                                                    <div className="relative">
                                                        <div className="grid" style={{ gridTemplateColumns: `repeat(${totalCols}, minmax(0, 1fr))` }}>
                                                            {Array.from({length: totalCols}).map((_,i) => (
                                                                <div key={i} className={`h-8 border-slate-300 ${i === totalCols - 1 ? '' : 'border-r'}`}></div>
                                                            ))}
                                                        </div>

                                                        <div
                                                            className={`absolute top-0 h-8 rounded text-white text-[10px] leading-tight font-semibold flex items-center ${barColorForCategory(row.category)} px-2`}
                                                            style={{ left: `${leftPercent}%`, width: `${widthPercent}%` }}
                                                            title={`${sanitizeTitle(row.title)} — Start: ${monthNames2026[clampedStart]}, Delivery: ${monthNames2026[clampedEnd]} (${row.sprints} sprintov)`}
                                                        >
                                                            <div className="truncate max-w-[90%]">{sanitizeTitle(row.title)}</div>
                                                        </div>
                                                    </div>
                                                ) : (
                                                    <div className="grid" style={{ gridTemplateColumns: `repeat(${totalCols}, minmax(0, 1fr))` }}>
                                                        {Array.from({length:12}).map((_,i) => <div key={i} className="h-8 border-r border-slate-300"></div>)}
                                                        <div className={`h-8 flex items-center justify-center ${barColorForCategory(row.category)} text-white text-[10px] font-semibold rounded`}>Future</div>
                                                    </div>
                                                )}
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- MAIN APP ---
        const RoadmapApp = () => {
            const [view, setView] = useState('roadmap'); // 'roadmap' | 'delivery' | 'matrix' | 'list'
            const [data, setData] = useState(rawData);
            const [activeCats, setActiveCats] = useState({ Feature: true, AI: true, 'Tech upgrade': true, BAS: true });
            
            // Filters state
            const [selectedOwners, setSelectedOwners] = useState([]);
            const [selectedClients, setSelectedClients] = useState([]);
            const [selectedRoi, setSelectedRoi] = useState([]); 
            const [selectedUis, setSelectedUis] = useState([]); 
            const [showFilterMenu, setShowFilterMenu] = useState(false); // Controls popover

            const toggleCat = (cat) => setActiveCats(prev => ({ ...prev, [cat]: !prev[cat] }));
            const resetCats = () => {
                setActiveCats({ Feature: true, AI: true, 'Tech upgrade': true, BAS: true });
                setSelectedOwners([]);
                setSelectedClients([]);
                setSelectedRoi([]);
                setSelectedUis([]); 
            };

            // Check if any complex filter is active
            const hasActiveFilters = selectedOwners.length > 0 || selectedClients.length > 0 || selectedRoi.length > 0 || selectedUis.length > 0;
            const activeFilterCount = selectedOwners.length + selectedClients.length + selectedRoi.length + selectedUis.length;

            const uniqueOwners = useMemo(() => {
                const owners = new Set(data.map(d => d.owner).filter(Boolean)); 
                return Array.from(owners).sort();
            }, [data]);

            const uniqueClients = useMemo(() => {
                const clients = new Set(data.map(d => d.client).filter(Boolean));
                return Array.from(clients).sort();
            }, [data]);

            const uniqueUis = useMemo(() => {
                const uis = new Set(data.map(d => d.cmsUi).filter(Boolean));
                return Array.from(uis).sort();
            }, [data]);

            const roiRanges = ['Nízky (<0,4)', 'Stredný (0,4 - 0,8)', 'Vysoký (>0,8)'];

            const filteredData = useMemo(() => {
                return data.filter(i => {
                    const catMatch = (activeCats[i.category] ?? true);
                    const ownerMatch = selectedOwners.length === 0 || selectedOwners.includes(i.owner);
                    const clientMatch = selectedClients.length === 0 || selectedClients.includes(i.client);
                    const currentRoiLabel = getRoiRange(i.roiIndex);
                    const roiMatch = selectedRoi.length === 0 || selectedRoi.includes(currentRoiLabel);
                    const uiMatch = selectedUis.length === 0 || selectedUis.includes(i.cmsUi);

                    return catMatch && ownerMatch && clientMatch && roiMatch && uiMatch;
                });
            }, [data, activeCats, selectedOwners, selectedClients, selectedRoi, selectedUis]);

            const handleUpdate = (id, updates) => setData(prev => prev.map(p => p.id === id ? { ...p, ...updates } : p));

            const quarters = {
                Q1: filteredData.filter(i => getQuarter(i.launch) === 'Q1'),
                Q2: filteredData.filter(i => getQuarter(i.launch) === 'Q2'),
                Q3: filteredData.filter(i => getQuarter(i.launch) === 'Q3'),
                Q4: filteredData.filter(i => getQuarter(i.launch) === 'Q4'),
                TBD: filteredData.filter(i => getQuarter(i.launch) === 'TBD'),
            };

            return (
                <div className="min-h-screen bg-slate-50 p-4 md:p-8 font-sans text-slate-900">
                    <div className="max-w-7xl mx-auto">
                        <StrategyBoard />

                        <div className="flex flex-wrap items-center justify-between gap-4 mb-6">
                            {/* LEFT SIDE: View Switchers */}
                            <div className="flex bg-white p-1 rounded-xl shadow-sm border border-slate-200">
                                <button onClick={() => setView('roadmap')} className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium ${view === 'roadmap' ? 'bg-blue-50 text-blue-700' : 'text-slate-600'}`}>
                                    <Icons.Calendar size={16} /> Roadmap
                                </button>
                                <button onClick={() => setView('delivery')} className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium ${view === 'delivery' ? 'bg-purple-50 text-purple-700' : 'text-slate-600'}`}>
                                    <Icons.Clock size={16} /> Delivery Plan
                                </button>
                                <button onClick={() => setView('matrix')} className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium ${view === 'matrix' ? 'bg-purple-50 text-purple-700' : 'text-slate-600'}`}>
                                    <Icons.BarChart2 size={16} /> Prioritizácia
                                </button>
                                <button onClick={() => setView('list')} className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium ${view === 'list' ? 'bg-green-50 text-green-700' : 'text-slate-600'}`}>
                                    <Icons.List size={16} /> Zoznam
                                </button>
                            </div>

                            {/* RIGHT SIDE: Filters */}
                            <div className="flex items-center gap-3 relative">
                                
                                {/* 1. Grouped Filter Button */}
                                <div className="relative">
                                    <button 
                                        onClick={() => setShowFilterMenu(!showFilterMenu)}
                                        className={`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium border transition-colors ${hasActiveFilters ? 'bg-blue-50 border-blue-200 text-blue-700' : 'bg-white border-slate-200 text-slate-600 hover:bg-slate-50'}`}
                                    >
                                        <Icons.Filter size={16} />
                                        <span>Filtre</span>
                                        {activeFilterCount > 0 && <span className="ml-1 bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded-full text-xs">{activeFilterCount}</span>}
                                    </button>

                                    {/* Popover Menu */}
                                    {showFilterMenu && (
                                        <>
                                            <div className="fixed inset-0 z-40" onClick={() => setShowFilterMenu(false)}></div>
                                            <div className="absolute top-full mt-2 right-0 bg-white border border-slate-200 shadow-xl rounded-xl p-4 z-50 w-72 flex flex-col gap-3">
                                                <div className="text-sm font-bold text-slate-700 mb-1">Pokročilé filtre</div>
                                                <MultiSelectFilter 
                                                    label="Vlastník" 
                                                    icon={Icons.User} 
                                                    options={uniqueOwners} 
                                                    selected={selectedOwners} 
                                                    onChange={setSelectedOwners}
                                                    title="Filtrovať podľa vlastníka" 
                                                />
                                                <MultiSelectFilter 
                                                    label="Klient" 
                                                    icon={Icons.Briefcase} 
                                                    options={uniqueClients} 
                                                    selected={selectedClients} 
                                                    onChange={setSelectedClients}
                                                    title="Filtrovať podľa klienta" 
                                                />
                                                <MultiSelectFilter 
                                                    label="ROI Index" 
                                                    icon={Icons.TrendingUp} 
                                                    options={roiRanges} 
                                                    selected={selectedRoi} 
                                                    onChange={setSelectedRoi}
                                                    title="Filtrovať podľa ROI" 
                                                />
                                                <MultiSelectFilter 
                                                    label="UI Tech" 
                                                    icon={Icons.Layers} 
                                                    options={uniqueUis} 
                                                    selected={selectedUis} 
                                                    onChange={setSelectedUis}
                                                    title="Filtrovať podľa UI" 
                                                />
                                            </div>
                                        </>
                                    )}
                                </div>

                                <div className="h-6 w-px bg-slate-300 mx-1"></div>

                                {/* 2. Category Toggles (Kept visible for quick access) */}
                                {['Feature','AI','Tech upgrade','BAS'].map(cat => (
                                    <button key={cat} onClick={() => toggleCat(cat)} className={`flex items-center gap-2 px-3 py-1 rounded-full text-xs font-medium ${activeCats[cat] ? 'bg-slate-100 text-slate-800' : 'bg-transparent text-slate-400'}`} title={`${activeCats[cat] ? 'Zrušiť filter' : 'Zapnúť filter'} ${cat}`}>
                                        <span className={`w-2 h-2 rounded-full ${cat === 'Feature' ? 'bg-blue-400' : cat === 'AI' ? 'bg-purple-400' : cat === 'Tech upgrade' ? 'bg-green-400' : 'bg-gray-400'}`}></span>
                                        <span>{cat === 'Tech upgrade' ? 'Tech' : cat}</span>
                                    </button>
                                ))}

                                {/* 3. Reset Button (Icon Only) */}
                                {(hasActiveFilters || !Object.values(activeCats).every(Boolean)) && (
                                    <button 
                                        onClick={resetCats} 
                                        className="p-1.5 rounded-full bg-red-50 text-red-500 hover:bg-red-100 transition-colors border border-red-100"
                                        title="Vymazať všetky filtre"
                                    >
                                        <Icons.X size={16} />
                                    </button>
                                )}
                            </div>
                        </div>

                        {view === 'roadmap' && <GanttRoadmap items={filteredData} />}

                        {view === 'delivery' && (
                            <div className="space-y-8">
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                    {['Q1','Q2','Q3','Q4'].map(q => (
                                        <div key={q} className="flex flex-col h-full">
                                            <div className="flex items-center justify-between mb-4 pb-2 border-b border-slate-200">
                                                <h3 className="font-bold text-slate-700 flex items-center gap-2"><Icons.Clock size={16} className="text-slate-400" /> {q} 2026</h3>
                                                <span className="bg-slate-100 text-slate-500 text-xs px-2 py-1 rounded-full">{quarters[q].length}</span>
                                            </div>
                                            <div className="space-y-3 flex-grow bg-slate-100/50 p-2 rounded-xl border border-slate-100/50 min-h-[200px]">
                                                {quarters[q].length > 0 ? quarters[q].map(item => <Card key={item.id} item={item} onUpdate={handleUpdate} />) : <div className="h-full flex items-center justify-center text-slate-400 text-sm italic">Plánovanie otvorené</div>}
                                            </div>
                                        </div>
                                    ))}
                                </div>

                                <div className="mt-8 pt-8 border-t border-slate-200">
                                    <div className="flex items-center gap-2 mb-4">
                                        <Icons.Layers size={20} className="text-slate-400" />
                                        <h3 className="font-bold text-slate-700">Backlog & TBD (Na zaradenie)</h3>
                                        <span className="text-sm text-slate-400 font-normal ml-2">- vyžaduje validáciu alebo odhad času</span>
                                    </div>
                                    <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 bg-slate-100 p-4 rounded-xl">
                                        {quarters.TBD.map(item => <Card key={item.id} item={item} onUpdate={handleUpdate} />)}
                                    </div>
                                </div>
                            </div>
                        )}

                        {view === 'matrix' && (
                            <div className="space-y-6">
                                <QuickWins items={filteredData} onUpdate={handleUpdate} />

                                <div className="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                                    <h3 className="text-lg font-bold mb-6 text-slate-800">Value vs. Effort Matrix</h3>
                                    <div className="relative h-[500px] w-full border-l-2 border-b-2 border-slate-200 bg-[radial-gradient(#e2e8f0_1px,transparent_1px)] [background-size:20px_20px]">
                                        <div className="absolute -left-10 top-1/2 -rotate-90 text-sm font-bold text-slate-400 tracking-widest">IMPACT (Value)</div>
                                        <div className="absolute bottom-[-40px] left-1/2 text-sm font-bold text-slate-400 tracking-widest">EFFORT (Size)</div>

                                        <div className="absolute top-0 right-0 w-1/2 h-1/2 bg-purple-50/50 rounded-bl-3xl"></div>
                                        <div className="absolute top-0 left-0 w-1/2 h-1/2 bg-green-50/50 rounded-br-3xl"></div>

                                        {filteredData.map(item => {
                                            const x = getSizeScore(item.size);
                                            const y = getImpactScore(item.impact);
                                            if (x === -1 || y === -1) return null;
                                            const left = x === 1 ? '20%' : x === 2 ? '50%' : '80%';
                                            const bottom = y === 1 ? '20%' : y === 2 ? '50%' : y === 3 ? '80%' : '10%';
                                            return (
                                                <div key={item.id} className="absolute transform -translate-x-1/2 translate-y-1/2 transition-all hover:scale-110 hover:z-10 cursor-pointer group" style={{ left, bottom }}>
                                                    <div className={`w-4 h-4 rounded-full border-2 border-white shadow-md ${item.impact === 'High' && item.size === 'S' ? 'bg-green-500 animate-pulse' : item.impact === 'High' ? 'bg-purple-500' : 'bg-blue-400'}`}></div>
                                                    <div className="absolute bottom-6 left-1/2 -translate-x-1/2 w-56 bg-slate-800 text-white text-xs p-2 rounded opacity-0 group-hover:opacity-100 pointer-events-none">
                                                        <div className="font-bold mb-1">{sanitizeTitle(item.title)}</div>
                                                        <div className="text-slate-300">Imp: {item.impact} | Eff: {item.size}</div>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>

                                    <div className="flex gap-6 mt-12 justify-center">
                                        <div className="flex items-center gap-2 text-sm text-slate-600"><span className="w-3 h-3 rounded-full bg-green-500"></span> Quick Wins</div>
                                        <div className="flex items-center gap-2 text-sm text-slate-600"><span className="w-3 h-3 rounded-full bg-purple-500"></span> Big Bets (Strategic)</div>
                                        <div className="flex items-center gap-2 text-sm text-slate-600"><span className="w-3 h-3 rounded-full bg-blue-400"></span> Standard Features</div>
                                    </div>
                                </div>

                                <div className="bg-slate-100 p-4 rounded-lg text-sm text-slate-500 flex gap-2 items-center">
                                    <Icons.HelpCircle size={16} />
                                    <span>Poznámka: {filteredData.filter(i => getSizeScore(i.size) === -1 || getImpactScore(i.impact) === -1).length} položiek nie je zobrazených v matici pre chýbajúce hodnoty.</span>
                                </div>
                            </div>
                        )}

                        {view === 'list' && (
                            <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                                <div className="overflow-x-auto">
                                    <table className="w-full text-left text-sm text-slate-600">
                                        <thead className="bg-slate-50 text-slate-700 uppercase tracking-wider text-xs font-bold">
                                            <tr>
                                                <th className="p-4">Názov Funkcie</th>
                                                <th className="p-4">Kategória</th>
                                                <th className="p-4">Stav</th>
                                                <th className="p-4">Impact</th>
                                                <th className="p-4">Veľkosť</th>
                                                <th className="p-4">Launch</th>
                                                <th className="p-4">Vlastník</th>
                                            </tr>
                                        </thead>
                                        <tbody className="divide-y divide-slate-100">
                                            {filteredData.map(item => {
                                                const missing = getMissingFields(item);
                                                const isInvalid = missing.length > 0;
                                                return (
                                                    <tr key={item.id} className={`hover:bg-slate-50 transition-colors ${isInvalid ? 'bg-gray-50/60' : ''}`}>
                                                        <td className="p-4 font-medium text-slate-900">
                                                            <div className="flex items-start justify-between">
                                                                <div className="group flex-1">
                                                                    <div className="flex items-center gap-3">
                                                                        {item.jiraUrl ? <a href={item.jiraUrl} target="_blank" rel="noopener noreferrer" className="underline decoration-dotted underline-offset-2">{sanitizeTitle(item.title)}</a> : <span>{sanitizeTitle(item.title)}</span>}
                                                                        {isInvalid && <span className="px-2 py-0.5 rounded-full bg-slate-100 text-slate-600 text-xs font-semibold">Not ready</span>}
                                                                    </div>
                                                                    {item.notes && <div className="text-xs text-slate-400 mt-0.5 font-normal">{item.notes}</div>}
                                                                </div>

                                                                {/* HOVER VISIBILITY */}
                                                                <div className="flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                                                                    <EditableJiraLink item={item} onUpdate={handleUpdate} />
                                                                    <TitleEditor item={item} onUpdate={handleUpdate} />
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td className="p-4"><span className={`px-2 py-1 rounded text-xs font-bold ${getCategoryColor(item.category)}`}>{item.category}</span></td>
                                                        <td className="p-4"><div className="flex items-center gap-1.5">{item.status === 'Prebieha' && <span className="w-1.5 h-1.5 rounded-full bg-blue-500"></span>}{item.status}</div></td>
                                                        <td className="p-4"><span className={`font-semibold ${getImpactColor(item.impact)}`}>{item.impact}</span></td>
                                                        <td className="p-4"><span className="bg-slate-100 text-slate-600 px-1.5 py-0.5 rounded font-mono text-xs">{item.size}</span></td>
                                                        <td className="p-4 text-slate-700">{item.launch}</td>
                                                        <td className="p-4 text-xs">{item.owner}</td>
                                                    </tr>
                                                );
                                            })}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // render app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<RoadmapApp />);
    </script>
</body>
</html>


